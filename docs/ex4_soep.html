<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title></title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/spacelab.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="site_libs/pagedtable-1.1/js/pagedtable.js"></script>
<link href="site_libs/font-awesome-4.5.0/css/font-awesome.min.css" rel="stylesheet" />

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>


</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 52px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 57px;
  margin-top: -57px;
}

.section h2 {
  padding-top: 57px;
  margin-top: -57px;
}
.section h3 {
  padding-top: 57px;
  margin-top: -57px;
}
.section h4 {
  padding-top: 57px;
  margin-top: -57px;
}
.section h5 {
  padding-top: 57px;
  margin-top: -57px;
}
.section h6 {
  padding-top: 57px;
  margin-top: -57px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>


<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>




<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}


.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
  padding-left: 25px;
  text-indent: 0;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>

<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Panel- and Multilevel Models</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Panel Exercises
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="ex1_soep.html">Ex1</a>
    </li>
    <li>
      <a href="ex2_soep.html">Ex2</a>
    </li>
    <li>
      <a href="ex3_soep.html">Ex3</a>
    </li>
    <li>
      <a href="ex4_soep.html">Ex4</a>
    </li>
    <li>
      <a href="ex5_soep.html">Ex5</a>
    </li>
    <li>
      <a href="ex6_soep.html">Ex6</a>
    </li>
    <li>
      <a href="ex7_soep.html">Ex7</a>
    </li>
    <li>
      <a href="ex8_soep.html">Ex8</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Models
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Random Intercept</li>
    <li>
      <a href="1_rimodel.html">1. without independent variable</a>
    </li>
    <li>
      <a href="2_rimodel.html">2. with independent variable</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="3_rcmodel.html">3. Random Coefficient</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="4_crosslevelint.html">4. Cross-Level Interaction</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="5_crossclass.html">5. Cross-Classified</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="6_3level.html">6. Three Level</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="7_lrtest.html">7. Likelihood Ratio test</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Data Preparation
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="ex0_create.html">Exercises</a>
    </li>
    <li>
      <a href="0_create.html">Models</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/TripLLL">
    <span class="fa fa-github"></span>
     
    
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">

<div class="btn-group pull-right">
<button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>




</div>


<div id="exercise-4" class="section level1 tabset">
<h1>Exercise 4</h1>
<div id="questions" class="section level2">
<h2>Questions</h2>
<p>4.1 Estimate the Mincer equation of last weeks exercise seperately for East and West Germany for all years since 1992 using loops (see foreach).</p>
<p>4.2 Present the effects of years of education and of sex (the gender pay gap) graphically showing the trend since 1992 (see collapse) Tip: Use the Stata commands foreach, collapse and graph combine.</p>
<p>4.3 Tell Stata your data is panel data using xtset. Describe the variables of your Mincer equation and differentiate within and between variation (xtsum).</p>
</div>
<div id="data-prep" class="section level2 tabset">
<h2>Data Prep</h2>
<div id="stata" class="section level3">
<h3>Stata</h3>
<pre class="stata"><code>set more off
capt clear
version 14

use &quot;_data/ex_mydf.dta&quot;, clear</code></pre>
<pre><code>
. set more off

. capt clear

. version 14

. 
. use &quot;_data/ex_mydf.dta&quot;, clear
(PGEN: Feb 12, 2017 13:00:53-1 DBV32L)</code></pre>
</div>
<div id="r" class="section level3">
<h3>R</h3>
<pre class="r"><code>#### load dataset ####
ex_mydf &lt;- readRDS(file = &quot;_data/ex_mydf.rds&quot;)

asample &lt;- ex_mydf %&gt;% 
      filter(
            # Working Hours
            pgtatzeit &gt;= 6,
            # age
            alter %&gt;% dplyr::between(18, 65),
            # Employment Status
            pgemplst %in% c(1,2,4),   # full-time(1), part-time(2), marg.-empl(4)
            # population status
            pop &lt; 3 # only private households
            ) %&gt;%
      # filter unplausible cases
      mutate(na = case_when(
              pid %in% c(1380202, 1380202, 607602, 2555301) ~ 1,
              pid == 8267202 &amp; syear == 2007 ~ 1,
              pid == 2633801 &amp; syear == 2006 ~ 1,
              pid == 2582901 &amp; syear &gt; 2006 ~ 1 )
             ) %&gt;% 
      filter(is.na(na)) %&gt;% 
      # select relevant variables
      dplyr::select(hwageb, lnwage, pgbilzeit, cpgbilzeit, pgisco88, pgnace, pgexpue,
             sex, ost, erf, erfq, cerf, frau, pgallbet, phrf, syear, pid, pid_syear) 
      # %&gt;%
      # drop_na() </code></pre>
</div>
</div>
<div id="answers" class="section level2 active">
<h2>Answers</h2>
<div id="mincer-equation" class="section level3 tabset">
<h3>4.1 Mincer Equation</h3>
<p><strong>Estimate the Mincer equation of last weeks exercise seperately for East and West Germany for all years since 1992 using loops (see foreach).</strong></p>
<div id="stata-1" class="section level4">
<h4>Stata</h4>
<pre class="stata"><code>use &quot;_data/ex_mydf.dta&quot;, clear

cap drop educationrev 
gen educationrev=.
cap drop upper lower
gen upper=.
gen lower=.

foreach year of numlist 1991/2015 {
      qui: reg lnwage pgbilzeit c.erf##c.erf pgexpue ost frau i.pgallbet if asample==1 &amp; syear==`year&#39; [pw=phrf], eform(b) cluster(hid)
      qui: replace educationrev = exp(_b[pgbilzeit]) if syear==`year&#39;
      qui: replace upper = exp(_b[pgbilzeit]+ 1.96*_se[pgbilzeit]) if syear==`year&#39;
      qui: replace lower = exp(_b[pgbilzeit]- 1.96*_se[pgbilzeit]) if syear==`year&#39;
}

preserve
collapse educationrev upper lower, by(syear) 
twoway (connected educationrev syear, sort) ///
(line upper lower syear, sort lpattern(dash dash) lcolor(bluishgray8 bluishgray8)) ///
, legend(off) subtitle(Gesamt)

graph save Graph &quot;out/educationrev_gesamt.gph&quot;, replace
restore

** repeat for only West Germany

cap drop educationrev_west
gen educationrev_west =.
cap drop upper lower
gen upper=.
gen lower=.
foreach year of numlist 1984/2015 {
qui:  reg lnwage pgbilzeit c.erf##c.erf pgexpue ost frau i.pgallbet if asample==1 &amp; syear==`year&#39; &amp; ost == 0 [pw=phrf], eform(b) cluster(hid)
qui: replace educationrev_west = exp(_b[pgbilzeit]) if syear==`year&#39;
qui: replace upper = exp(_b[pgbilzeit]+ 1.96*_se[pgbilzeit]) if syear==`year&#39;
qui: replace lower = exp(_b[pgbilzeit]- 1.96*_se[pgbilzeit]) if syear==`year&#39;
}


preserve
collapse educationrev_west upper lower, by(syear) 
twoway (connected educationrev_west syear, sort) ///
(line upper lower syear, sort lpattern(dash dash) lcolor(bluishgray8 bluishgray8)) ///
, legend(off) subtitle(West Germany)
graph save Graph &quot;out/educationrev_west.gph&quot;, replace
restore


** repeat for only East Germany

cap drop educationrev_ost
gen educationrev_ost =.
cap drop upper lower
gen upper=.
gen lower=.
foreach year of numlist 1991/2015 {
qui: reg lnwage pgbilzeit c.erf##c.erf pgexpue ost frau i.pgallbet   if asample==1 &amp; syear==`year&#39; &amp; ost == 1 [pw=phrf], eform(b) cluster(hid)
qui: replace educationrev_ost = exp(_b[pgbilzeit]) if syear==`year&#39;
qui: replace upper = exp(_b[pgbilzeit]+ 1.96*_se[pgbilzeit]) if syear==`year&#39;
qui: replace lower = exp(_b[pgbilzeit]- 1.96*_se[pgbilzeit]) if syear==`year&#39;
}

preserve
collapse educationrev_ost upper lower, by(syear) 
twoway (connected educationrev_ost syear, sort) ///
(line upper lower syear, sort lpattern(dash dash) lcolor(bluishgray8 bluishgray8)) ///
, legend(off) subtitle(East Germany)
graph save Graph &quot;out/educationrev_ost.gph&quot;, replace
restore

***
graph combine  ///
      &quot;out/educationrev_west.gph&quot;  ///
      &quot;out/educationrev_ost.gph&quot;  ///
      &quot;out/educationrev_gesamt.gph&quot; ///
, ycommon xcommon note(GSOEP 32, size(vsmall) position(5)) title(Development of Education Returns)

graph save Graph &quot;out/educationrev_all.gph&quot;, replace</code></pre>
<pre><code>
. use &quot;_data/ex_mydf.dta&quot;, clear
(PGEN: Feb 12, 2017 13:00:53-1 DBV32L)

. 
. cap drop educationrev 

. gen educationrev=.
(594,828 missing values generated)

. cap drop upper lower

. gen upper=.
(594,828 missing values generated)

. gen lower=.
(594,828 missing values generated)

. 
. foreach year of numlist 1991/2015 {
  2.       qui: reg lnwage pgbilzeit c.erf##c.erf pgexpue ost frau i.pgallbet i
&gt; f asample==1 &amp; syear==`year&#39; [pw=phrf], eform(b) cluster(hid)
  3.       qui: replace educationrev = exp(_b[pgbilzeit]) if syear==`year&#39;
  4.       qui: replace upper = exp(_b[pgbilzeit]+ 1.96*_se[pgbilzeit]) if syea
&gt; r==`year&#39;
  5.       qui: replace lower = exp(_b[pgbilzeit]- 1.96*_se[pgbilzeit]) if syea
&gt; r==`year&#39;
  6. }

. 
. preserve

. collapse educationrev upper lower, by(syear) 

. twoway (connected educationrev syear, sort) ///
&gt; (line upper lower syear, sort lpattern(dash dash) lcolor(bluishgray8 bluishgr
&gt; ay8)) ///
&gt; , legend(off) subtitle(Gesamt)

. 
. graph save Graph &quot;out/educationrev_gesamt.gph&quot;, replace
(file out/educationrev_gesamt.gph saved)

. restore

. 
. ** repeat for only West Germany
. 
. cap drop educationrev_west

. gen educationrev_west =.
(594,828 missing values generated)

. cap drop upper lower

. gen upper=.
(594,828 missing values generated)

. gen lower=.
(594,828 missing values generated)

. foreach year of numlist 1984/2015 {
  2. qui:  reg lnwage pgbilzeit c.erf##c.erf pgexpue ost frau i.pgallbet if asa
&gt; mple==1 &amp; syear==`year&#39; &amp; ost == 0 [pw=phrf], eform(b) cluster(hid)
  3. qui: replace educationrev_west = exp(_b[pgbilzeit]) if syear==`year&#39;
  4. qui: replace upper = exp(_b[pgbilzeit]+ 1.96*_se[pgbilzeit]) if syear==`ye
&gt; ar&#39;
  5. qui: replace lower = exp(_b[pgbilzeit]- 1.96*_se[pgbilzeit]) if syear==`ye
&gt; ar&#39;
  6. }

. 
. 
. preserve

. collapse educationrev_west upper lower, by(syear) 

. twoway (connected educationrev_west syear, sort) ///
&gt; (line upper lower syear, sort lpattern(dash dash) lcolor(bluishgray8 bluishgr
&gt; ay8)) ///
&gt; , legend(off) subtitle(West Germany)

. graph save Graph &quot;out/educationrev_west.gph&quot;, replace
(file out/educationrev_west.gph saved)

. restore

. 
. 
. ** repeat for only East Germany
. 
. cap drop educationrev_ost

. gen educationrev_ost =.
(594,828 missing values generated)

. cap drop upper lower

. gen upper=.
(594,828 missing values generated)

. gen lower=.
(594,828 missing values generated)

. foreach year of numlist 1991/2015 {
  2. qui: reg lnwage pgbilzeit c.erf##c.erf pgexpue ost frau i.pgallbet   if as
&gt; ample==1 &amp; syear==`year&#39; &amp; ost == 1 [pw=phrf], eform(b) cluster(hid)
  3. qui: replace educationrev_ost = exp(_b[pgbilzeit]) if syear==`year&#39;
  4. qui: replace upper = exp(_b[pgbilzeit]+ 1.96*_se[pgbilzeit]) if syear==`ye
&gt; ar&#39;
  5. qui: replace lower = exp(_b[pgbilzeit]- 1.96*_se[pgbilzeit]) if syear==`ye
&gt; ar&#39;
  6. }

. 
. preserve

. collapse educationrev_ost upper lower, by(syear) 

. twoway (connected educationrev_ost syear, sort) ///
&gt; (line upper lower syear, sort lpattern(dash dash) lcolor(bluishgray8 bluishgr
&gt; ay8)) ///
&gt; , legend(off) subtitle(East Germany)

. graph save Graph &quot;out/educationrev_ost.gph&quot;, replace
(file out/educationrev_ost.gph saved)

. restore

. 
. ***
. graph combine  ///
&gt;       &quot;out/educationrev_west.gph&quot;  ///
&gt;       &quot;out/educationrev_ost.gph&quot;  ///
&gt;       &quot;out/educationrev_gesamt.gph&quot; ///
&gt; , ycommon xcommon note(GSOEP 32, size(vsmall) position(5)) title(Development 
&gt; of Education Returns)

. 
. graph save Graph &quot;out/educationrev_all.gph&quot;, replace
(file out/educationrev_all.gph saved)</code></pre>
</div>
<div id="r-1" class="section level4 tabset active">
<h4>R</h4>
<div id="model" class="section level5">
<h5>Model</h5>
<p>Trend by Year</p>
<pre class="r"><code># Fit Hourly Wage Brutto Model by year
      fit4.1 &lt;- asample %&gt;% 
            group_by(syear) %&gt;% 
            do(model = lm(lnwage ~ 0+ pgbilzeit + I(erf^2) + pgexpue +
                                ost + frau + factor(pgallbet), 
               data=., weights=phrf))</code></pre>
<p>Trend by Year and Region</p>
<pre class="r"><code>fit4.1_region &lt;- asample %&gt;% 
      group_by(ost, syear) %&gt;% 
      do(model = lm(lnwage ~ 0 + pgbilzeit + I(erf^2) + pgexpue +
                          ost + frau + factor(pgallbet), 
         data=., weights=phrf))

      # look at model
            # (fit4_region$model) # only use if not too many models
            #fit4_region %&gt;% tidy(model)
            #fit4_region %&gt;% glance(model)
            #fit4_region %&gt;% augment(model)</code></pre>
</div>
<div id="plot" class="section level5 active">
<h5>Plot</h5>
<p>Education Return Trend 1992 - 2015</p>
<pre class="r"><code>     # grab relevant info
      td_fit &lt;- fit4.1 %&gt;% tidy(model, conf.int = TRUE)
      td_plot &lt;- td_fit %&gt;% filter(term == &quot;pgbilzeit&quot;,
                                   syear &gt; 1990) 
      
      # Plot Over Years
      td_plot %&gt;% 
            ggplot(aes(x = syear, y = estimate)) +
            geom_point() +
            geom_errorbar(aes(ymin = conf.low, ymax = conf.high),
                          alpha=0.3, color = &quot;black&quot;) +
            geom_line() +
            ylab(&quot;Education Return&quot;) +
            xlab(&quot;Survey Year&quot;) +
            ggtitle(&quot;Education Return from 1991 to 2015&quot;) +
            scale_x_continuous(breaks = seq(1991, 2016, by= 5))+
            scale_y_continuous(labels = scales::percent)+
            theme_bw()</code></pre>
<p><img src="ex4_soep_files/figure-html/4.1%20Education%20Return%20Trend-1.png" width="672" /></p>
<p>Education Return Trend over Time and Region</p>
<pre class="r"><code>      # make tidy dataframe 
      td_fit &lt;- fit4.1_region %&gt;% tidy(model, conf.int = TRUE)
      # select relevant info (coefficient for gender)
      td_plot &lt;- td_fit %&gt;% filter(term == &quot;pgbilzeit&quot;)
      
      # plot Trend by Region (grouped)
      td_plot %&gt;% 
      ggplot(aes(x = syear, y = estimate, 
                 color = as.factor(ost)), fill = as.factor(ost)) +
            geom_point() +
            geom_ribbon(ggplot2::aes_string(ymin = &quot;conf.low&quot;, ymax = &quot;conf.high&quot;, 
                fill = &quot;as.factor(ost)&quot;, color = NULL), alpha = 0.2) +
            geom_line() +
            ylab(&quot;Education Return&quot;) +
            xlab(&quot;Survey Year&quot;) +
            ggtitle(&quot;Education Return from 1984 to 2015 by Region&quot;) +
            scale_x_continuous(breaks = seq(1985, 2015, by= 5))+
            scale_y_continuous(labels = scales::percent)</code></pre>
<p><img src="ex4_soep_files/figure-html/4.1%20Education%20Return%20Trend%20by%20Region-1.png" width="672" /></p>
<pre class="r"><code>      # plot Trend by Region (facet)
      td_plot %&gt;% 
      ggplot(aes(x = syear, y = estimate)) +
            geom_point() +
            geom_errorbar(aes(ymin = conf.low, ymax = conf.high),
                          alpha=0.3, color = &quot;black&quot;) +
            geom_line() +
            facet_wrap(~ ost)+
            ylab(&quot;Education Return&quot;) +
            xlab(&quot;Survey Year&quot;) +
            ggtitle(&quot;Education Return from 1984 to 2015 by Region&quot;) +
            scale_x_continuous(breaks = seq(1985, 2015, by= 5))+
            scale_y_continuous(labels = scales::percent)</code></pre>
<p><img src="ex4_soep_files/figure-html/4.1%20Education%20Return%20Trend%20by%20Region-2.png" width="672" /></p>
</div>
</div>
</div>
<div id="gender-returns-over-time" class="section level3 tabset">
<h3>4.2 Gender Returns over Time</h3>
<p><strong>Present the effects of years of education and of sex (the gender pay gap) graphically showing the trend since 1992 (see collapse) Tip: Use the Stata commands foreach, collapse and graph combine. </strong></p>
<div id="stata-2" class="section level4">
<h4>Stata</h4>
<pre class="stata"><code>use &quot;_data/ex_mydf.dta&quot;, clear

cap drop genderrev
gen genderrev =.
cap drop upper lower
gen upper=.
gen lower=.

foreach year of numlist 1991/2015 {
      qui: reg lnwage pgbilzeit c.erf##c.erf pgexpue ost frau i.pgallbet if asample==1 &amp; syear==`year&#39; [pw=phrf], eform(b) cluster(hid)
      qui: replace genderrev = exp(_b[frau]) if syear==`year&#39;
      qui: replace upper = exp(_b[frau]+ 1.96*_se[frau]) if syear==`year&#39;
      qui: replace lower = exp(_b[frau]- 1.96*_se[frau]) if syear==`year&#39;
}


preserve
collapse genderrev upper lower, by(syear) 
twoway (connected genderrev syear, sort) ///
(line upper lower syear, sort lpattern(dash dash) lcolor(bluishgray8 bluishgray8)) ///
, legend(off) subtitle(Gesamt)
graph save Graph &quot;out/genderrev_gesamt.gph&quot;, replace
restore

** repeat for only west germany
cap drop genderrev_west
gen genderrev_west=.
cap drop upper lower
gen upper=.
gen lower=.
foreach year of numlist 1984/2015 {
qui: reg lnwage frau c.erf##c.erf pgexpue ost frau i.pgallbet   if asample==1 &amp; syear==`year&#39; &amp; ost==0 [pw=phrf], eform(b) cluster(hid)
qui: replace genderrev_west = exp(_b[frau]) if syear==`year&#39;
qui: replace upper = exp(_b[frau]+ 1.96*_se[frau]) if syear==`year&#39;
qui: replace lower = exp(_b[frau]- 1.96*_se[frau]) if syear==`year&#39;
}
*twoway (connected genderrev_west syear, sort) (line upper lower syear, sort) 
preserve
collapse genderrev_west upper lower, by(syear) 
twoway (connected genderrev_west syear, sort) ///
(line upper lower syear, sort lpattern(dash dash) lcolor(bluishgray8 bluishgray8)) ///
, legend(off) subtitle(Ostdeutschland)
graph save Graph &quot;out/genderrev_west.gph&quot;, replace
restore


** repeat for only east germany

cap drop genderrev_ost
gen genderrev_ost=.
cap drop upper lower
gen upper=.
gen lower=.
foreach year of numlist 1991/2015 {
qui: reg lnwage frau c.erf##c.erf pgexpue ost frau i.pgallbet   if asample==1 &amp; syear==`year&#39; &amp; ost==1 [pw=phrf], eform(b) cluster(hid)
qui: replace genderrev_ost = exp(_b[frau]) if syear==`year&#39;
qui: replace upper = exp(_b[frau]+ 1.96*_se[frau]) if syear==`year&#39;
qui: replace lower = exp(_b[frau]- 1.96*_se[frau]) if syear==`year&#39;
}
*twoway (connected genderrev_ost syear, sort) (line upper lower syear, sort)
preserve
collapse genderrev_ost upper lower, by(syear) 
twoway (connected genderrev_ost syear, sort) ///
(line upper lower syear, sort lpattern(dash dash) lcolor(bluishgray8 bluishgray8)) ///
, legend(off) subtitle(Westdeutschland)
graph save Graph &quot;out/genderrev_ost.gph&quot;, replace
restore

***
graph combine  ///
&quot;out/genderrev_ost.gph&quot;  ///
&quot;out/genderrev_west.gph&quot;  ///
&quot;out/genderrev_gesamt.gph&quot; ///
, ycommon xcommon note(GSOEP 32, size(vsmall) position(5)) title(Development of Gender Returns)

graph save Graph &quot;out/genderrev_all.gph&quot;, replace
</code></pre>
<pre><code>
. use &quot;_data/ex_mydf.dta&quot;, clear
(PGEN: Feb 12, 2017 13:00:53-1 DBV32L)

. 
. cap drop genderrev

. gen genderrev =.
(594,828 missing values generated)

. cap drop upper lower

. gen upper=.
(594,828 missing values generated)

. gen lower=.
(594,828 missing values generated)

. 
. foreach year of numlist 1991/2015 {
  2.       qui: reg lnwage pgbilzeit c.erf##c.erf pgexpue ost frau i.pgallbet i
&gt; f asample==1 &amp; syear==`year&#39; [pw=phrf], eform(b) cluster(hid)
  3.       qui: replace genderrev = exp(_b[frau]) if syear==`year&#39;
  4.       qui: replace upper = exp(_b[frau]+ 1.96*_se[frau]) if syear==`year&#39;
  5.       qui: replace lower = exp(_b[frau]- 1.96*_se[frau]) if syear==`year&#39;
  6. }

. 
. 
. preserve

. collapse genderrev upper lower, by(syear) 

. twoway (connected genderrev syear, sort) ///
&gt; (line upper lower syear, sort lpattern(dash dash) lcolor(bluishgray8 bluishgr
&gt; ay8)) ///
&gt; , legend(off) subtitle(Gesamt)

. graph save Graph &quot;out/genderrev_gesamt.gph&quot;, replace
(file out/genderrev_gesamt.gph saved)

. restore

. 
. ** repeat for only west germany
. cap drop genderrev_west

. gen genderrev_west=.
(594,828 missing values generated)

. cap drop upper lower

. gen upper=.
(594,828 missing values generated)

. gen lower=.
(594,828 missing values generated)

. foreach year of numlist 1984/2015 {
  2. qui: reg lnwage frau c.erf##c.erf pgexpue ost frau i.pgallbet   if asample
&gt; ==1 &amp; syear==`year&#39; &amp; ost==0 [pw=phrf], eform(b) cluster(hid)
  3. qui: replace genderrev_west = exp(_b[frau]) if syear==`year&#39;
  4. qui: replace upper = exp(_b[frau]+ 1.96*_se[frau]) if syear==`year&#39;
  5. qui: replace lower = exp(_b[frau]- 1.96*_se[frau]) if syear==`year&#39;
  6. }

. *twoway (connected genderrev_west syear, sort) (line upper lower syear, sort)
&gt;  
. preserve

. collapse genderrev_west upper lower, by(syear) 

. twoway (connected genderrev_west syear, sort) ///
&gt; (line upper lower syear, sort lpattern(dash dash) lcolor(bluishgray8 bluishgr
&gt; ay8)) ///
&gt; , legend(off) subtitle(Ostdeutschland)

. graph save Graph &quot;out/genderrev_west.gph&quot;, replace
(file out/genderrev_west.gph saved)

. restore

. 
. 
. ** repeat for only east germany
. 
. cap drop genderrev_ost

. gen genderrev_ost=.
(594,828 missing values generated)

. cap drop upper lower

. gen upper=.
(594,828 missing values generated)

. gen lower=.
(594,828 missing values generated)

. foreach year of numlist 1991/2015 {
  2. qui: reg lnwage frau c.erf##c.erf pgexpue ost frau i.pgallbet   if asample
&gt; ==1 &amp; syear==`year&#39; &amp; ost==1 [pw=phrf], eform(b) cluster(hid)
  3. qui: replace genderrev_ost = exp(_b[frau]) if syear==`year&#39;
  4. qui: replace upper = exp(_b[frau]+ 1.96*_se[frau]) if syear==`year&#39;
  5. qui: replace lower = exp(_b[frau]- 1.96*_se[frau]) if syear==`year&#39;
  6. }

. *twoway (connected genderrev_ost syear, sort) (line upper lower syear, sort)
. preserve

. collapse genderrev_ost upper lower, by(syear) 

. twoway (connected genderrev_ost syear, sort) ///
&gt; (line upper lower syear, sort lpattern(dash dash) lcolor(bluishgray8 bluishgr
&gt; ay8)) ///
&gt; , legend(off) subtitle(Westdeutschland)

. graph save Graph &quot;out/genderrev_ost.gph&quot;, replace
(file out/genderrev_ost.gph saved)

. restore

. 
. ***
. graph combine  ///
&gt; &quot;out/genderrev_ost.gph&quot;  ///
&gt; &quot;out/genderrev_west.gph&quot;  ///
&gt; &quot;out/genderrev_gesamt.gph&quot; ///
&gt; , ycommon xcommon note(GSOEP 32, size(vsmall) position(5)) title(Development 
&gt; of Gender Returns)

. 
. graph save Graph &quot;out/genderrev_all.gph&quot;, replace
(file out/genderrev_all.gph saved)

. </code></pre>
</div>
<div id="r-2" class="section level4 tabset active">
<h4>R</h4>
<div id="model-1" class="section level5">
<h5>Model</h5>
<p>The Plots are based on the same models as in 4.1.</p>
</div>
<div id="plot-1" class="section level5 active">
<h5>Plot</h5>
<p>Gender Return Trend 1991 - 2015</p>
<pre class="r"><code>     # grab relevant info
      td_fit &lt;- fit4.1 %&gt;% tidy(model, conf.int = TRUE)
      td_plot &lt;- td_fit %&gt;% filter(term == &quot;frau&quot;,
                                   syear &gt; 1990) 
      
      # Plot Over Years
      td_plot %&gt;% 
            ggplot(aes(x = syear, y = estimate)) +
            geom_point() +
            geom_errorbar(aes(ymin = conf.low, ymax = conf.high),
                          alpha=0.3, color = &quot;black&quot;) +
            geom_line() +
            ylab(&quot;Gender Return&quot;) +
            xlab(&quot;Survey Year&quot;) +
            ggtitle(&quot;Gender Pay Gap from 1991 to 2015&quot;) +
            scale_x_continuous(breaks = seq(1991, 2016, by= 5))+
            scale_y_reverse(labels = scales::percent)+
            theme_bw()</code></pre>
<p><img src="ex4_soep_files/figure-html/4.2%20Education%20Return%20Trend-1.png" width="672" /></p>
<p>Gender Return Trend by Year and Gender</p>
<pre class="r"><code>      # make tidy dataframe 
      td_fit &lt;- fit4.1_region %&gt;% tidy(model, conf.int = TRUE)
      # select relevant info (coefficient for gender)
      td_plot &lt;- td_fit %&gt;% filter(term == &quot;frau&quot;)
      
      # plot Trend by Region (grouped)
      td_plot %&gt;% 
      ggplot(aes(x = syear, y = estimate, color = as.factor(ost))) +
            geom_point() +
            geom_errorbar(aes(ymin = conf.low, ymax = conf.high),
                          alpha=0.3, color = &quot;black&quot;) +
            geom_line() +
            ylab(&quot;Gender Return&quot;) +
            xlab(&quot;Survey Year&quot;) +
            ggtitle(&quot;Gender Pay Gap by Region&quot;) +
            scale_x_continuous(breaks = seq(1985, 2015, by= 5))+
            scale_y_reverse(labels = scales::percent)</code></pre>
<p><img src="ex4_soep_files/figure-html/4.2%20Gender%20Return%20Trend%20by%20Region-1.png" width="672" /></p>
<pre class="r"><code>      # plot Trend by Region (facet)
      td_plot %&gt;% 
      ggplot(aes(x = syear, y = estimate)) +
            geom_point() +
            geom_errorbar(aes(ymin = conf.low, ymax = conf.high),
                          alpha=0.3, color = &quot;black&quot;) +
            geom_line() +
            facet_wrap(~ost)+
            ylab(&quot;Gender Return&quot;) +
            xlab(&quot;Survey Year&quot;) +
            ggtitle(&quot;Gender Pay Gap by Region&quot;) +
            scale_x_continuous(breaks = seq(1985, 2015, by= 5))</code></pre>
<p><img src="ex4_soep_files/figure-html/4.2%20Gender%20Return%20Trend%20by%20Region-2.png" width="672" /></p>
</div>
</div>
</div>
<div id="xtset" class="section level3 tabset">
<h3>4.3 xtset</h3>
<p><strong>Tell Stata your data is panel data using xtset. Describe the variables of your Mincer equation and differentiate within and between variation (xtsum).</strong></p>
<p>Note: <strong>STATA within min and max:</strong> <em>in order to get the correct min and max of the person specific within standard deviations in STATA, you have to subtract / add the grand mean to the displayed values</em></p>
<div id="stata-3" class="section level4">
<h4>Stata</h4>
<pre class="stata"><code>use &quot;_data/ex_mydf.dta&quot;, clear

*tab pop
*tab pgstib

*Only private Households (pop &gt; 3), not in wf (10), apprentice (11), unempl (12), retired (13)
cap drop asample
gen asample = 1 if pop &lt; 3 &amp; pgstib!=10 &amp; pgstib!=11 &amp; pgstib!=12 &amp; pgstib != 13  
    
xtset pid syear
*xtdes

xtreg lnwage c.erf##c.erf pgexpue frau i.pgallbet if asample==1, fe

* xtsum
xtsum lnwage pgbilzeit erf ost frau if asample==1

*** Tabellen
xttab
</code></pre>
<pre><code>
. use &quot;_data/ex_mydf.dta&quot;, clear
(PGEN: Feb 12, 2017 13:00:53-1 DBV32L)

. 
. *tab pop
. *tab pgstib
. 
. *Only private Households (pop &gt; 3), not in wf (10), apprentice (11), unempl (
&gt; 12), retired (13)
. cap drop asample

. gen asample = 1 if pop &lt; 3 &amp; pgstib!=10 &amp; pgstib!=11 &amp; pgstib!=12 &amp; pgstib !=
&gt;  13  
(240,353 missing values generated)

.         
. xtset pid syear
       panel variable:  pid (unbalanced)
        time variable:  syear, 1984 to 2015, but with gaps
                delta:  1 unit

. *xtdes
. 
. xtreg lnwage c.erf##c.erf pgexpue frau i.pgallbet if asample==1, fe
note: frau omitted because of collinearity

Fixed-effects (within) regression               Number of obs     =    311,775
Group variable: pid                             Number of groups  =     50,711

R-sq:                                           Obs per group:
     within  = 0.0952                                         min =          1
     between = 0.2687                                         avg =        6.1
     overall = 0.1958                                         max =         32

                                                F(7,261057)       =    3925.97
corr(u_i, Xb)  = -0.0184                        Prob &gt; F          =     0.0000

------------------------------------------------------------------------------
      lnwage |      Coef.   Std. Err.      t    P&gt;|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         erf |   .0594265   .0004077   145.77   0.000     .0586275    .0602255
             |
 c.erf#c.erf |   -.000997   9.51e-06  -104.88   0.000    -.0010156   -.0009783
             |
     pgexpue |  -.0302878   .0014773   -20.50   0.000    -.0331834   -.0273922
        frau |          0  (omitted)
             |
    pgallbet |
[2] GE 20..  |   .0574398   .0029346    19.57   0.000      .051688    .0631915
[3] GE 20..  |   .0954839   .0034194    27.92   0.000     .0887819    .1021859
[4] GE 2000  |   .1131657   .0036127    31.32   0.000     .1060848    .1202465
[5] Selbs..  |  -.0302114   .0059587    -5.07   0.000    -.0418902   -.0185326
             |
       _cons |   1.949638    .004002   487.16   0.000     1.941794    1.957482
-------------+----------------------------------------------------------------
     sigma_u |   .5570618
     sigma_e |  .36230039
         rho |  .70274527   (fraction of variance due to u_i)
------------------------------------------------------------------------------
F test that all u_i=0: F(50710, 261057) = 9.88               Prob &gt; F = 0.0000

. 
. * xtsum
. xtsum lnwage pgbilzeit erf ost frau if asample==1

Variable         |      Mean   Std. Dev.       Min        Max |    Observations
-----------------+--------------------------------------------+----------------
lnwage   overall |  2.556967   .6522679  -5.025553   7.214181 |     N =  328322
         between |             .6568632  -4.962845   6.289409 |     n =   56025
         within  |             .3543293  -4.673269   6.503639 | T-bar = 5.86028
                 |                                            |
pgbilz~t overall |  12.18844   2.734574          7         18 |     N =  341889
         between |             2.669908          7         18 |     n =   56309
         within  |             .5543849    1.92177    20.3551 | T-bar = 6.07166
                 |                                            |
erf      overall |  16.05425   11.56454          0      64.48 |     N =  344352
         between |              11.8974          0   63.85333 |     n =   53729
         within  |             3.899642  -.1444556   35.28363 | T-bar = 6.40905
                 |                                            |
ost      overall |  .2085112   .4062447          0          1 |     N =  354475
         between |             .3907451          0          1 |     n =   60394
         within  |             .0676974  -.7498222   1.177261 | T-bar = 5.86937
                 |                                            |
frau     overall |  .4573637   .4981795          0          1 |     N =  354475
         between |             .4996421          0          1 |     n =   60394
         within  |                    0   .4573637   .4573637 | T-bar = 5.86937

. 
. *** Tabellen
. xttab
varlist required
r(100);

end of do-file
r(100);</code></pre>
</div>
<div id="r-3" class="section level4">
<h4>R</h4>
<p>In R there is no package available that calculates the between and within variance of variables in panel datasets. Therefore we need to write a function to achieve the desired goal. The function used in this case originates from <a href="https://stackoverflow.com/questions/49282083/xtsum-command-for-r">here</a> and has been adapted a bit.</p>
<p>In a first step the overall descriptive statistics are calculated and stored, then the between means are calculated for each individual and then the variation and other statistics are calculated. Lastly the stats for within variation are calculated and the stored results are returned. The function can now be used in the following way:</p>
<p>The function XTSUM takes three inputs:</p>
<p>data – the dataset varname – the variable to xtsum unit – the identifier for the within dimension</p>
<pre class="r"><code>asample &lt;- ex_mydf %&gt;% 
      filter(
            # only private households
            pop &lt;= 2,
            # only workforce
            # not in wf (10), apprentice (11), unempl (12), retired (13)
            !pgstib %in% c(10,11,12,13) 
      )

# quick frequency table
# asample %&gt;% group_by(syear) %&gt;% summarise(n = n()) %&gt;% as.data.frame()

XTSUM &lt;- function(data, varname, unit) {
  varname &lt;- enquo(varname)
  loc.unit &lt;- enquo(unit)

ores &lt;- data %&gt;% summarise(ovr.mean = mean(!! varname, na.rm=TRUE),
                           ovr.sd = sd(!! varname, na.rm=TRUE), 
                           ovr.min = min(!! varname, na.rm=TRUE), 
                           ovr.max = max(!! varname, na.rm=TRUE),
                           ovr.N = sum(as.numeric((!is.na(!! varname)))),
                           ovr.N2 = n())
bmeans &lt;- data %&gt;% 
      group_by(!! loc.unit) %&gt;% 
      summarise(meanx = mean(!! varname, na.rm=T), 
                t.count = sum(as.numeric(!is.na(!! varname))),
                t.count2 = na.omit(n())
                )
                

bres &lt;- bmeans %&gt;% 
      ungroup() %&gt;% 
      summarise(between.sd = sd(meanx, na.rm=TRUE), 
                between.min = min(meanx, na.rm=TRUE), 
                between.max = max(meanx, na.rm=TRUE),
                Units = sum(as.numeric(!is.na(t.count))), 
                t.bar = mean(t.count, na.rm=TRUE),
                t.bar2 = mean(t.count2, na.rm = T))

wdat &lt;- data %&gt;% 
      group_by(!! loc.unit) %&gt;% 
      mutate(W.x = scale(!! varname, scale=FALSE))

wres &lt;- wdat %&gt;% 
      ungroup() %&gt;% 
      summarise(within.sd = sd(W.x, na.rm=TRUE), 
                within.min = min(W.x, na.rm=TRUE), 
                within.max = max(W.x, na.rm=TRUE))

return(list(ores = ores, bres = bres, wres = wres))
}</code></pre>
<p>Using the function</p>
<pre class="r"><code>XTSUM(asample, varname = lnwage , unit = pid)</code></pre>
<pre><code>## $ores
## # A tibble: 1 x 5
##   ovr.mean ovr.sd ovr.min ovr.max  ovr.N
##      &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;
## 1     2.16  0.764   -5.28    7.03 332797
## 
## $bres
## # A tibble: 1 x 5
##   between.sd between.min between.max Units t.bar
##        &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1      0.755       -4.96        6.03 95777  3.47
## 
## $wres
## # A tibble: 1 x 3
##   within.sd within.min within.max
##       &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;
## 1     0.446      -6.99       4.13</code></pre>
<pre class="r"><code>XTSUM(asample, varname = pgbilzeit , unit = pid)</code></pre>
<pre><code>## $ores
## # A tibble: 1 x 5
##   ovr.mean ovr.sd ovr.min ovr.max  ovr.N
##      &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;
## 1     12.2   2.73    7.00    18.0 341889
## 
## $bres
## # A tibble: 1 x 5
##   between.sd between.min between.max Units t.bar
##        &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1       2.67        7.00        18.0 95777  3.57
## 
## $wres
## # A tibble: 1 x 3
##   within.sd within.min within.max
##       &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;
## 1     0.554      -10.3       8.17</code></pre>
<pre class="r"><code>XTSUM(asample, varname = frau , unit = pid)</code></pre>
<pre><code>## $ores
## # A tibble: 1 x 5
##   ovr.mean ovr.sd ovr.min ovr.max  ovr.N
##      &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;
## 1    0.464  0.499       0    1.00 575397
## 
## $bres
## # A tibble: 1 x 5
##   between.sd between.min between.max Units t.bar
##        &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1      0.500           0        1.00 95777  6.01
## 
## $wres
## # A tibble: 1 x 3
##   within.sd within.min within.max
##       &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;
## 1         0          0          0</code></pre>
<pre class="r"><code>XTSUM(asample, varname = pgallbet , unit = pid)</code></pre>
<pre><code>## $ores
## # A tibble: 1 x 5
##   ovr.mean ovr.sd ovr.min ovr.max  ovr.N
##      &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;
## 1     2.49   1.20    1.00    5.00 333299
## 
## $bres
## # A tibble: 1 x 5
##   between.sd between.min between.max Units t.bar
##        &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1       1.08        1.00        5.00 95777  3.48
## 
## $wres
## # A tibble: 1 x 3
##   within.sd within.min within.max
##       &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;
## 1     0.680      -3.88       3.88</code></pre>
<pre class="r"><code>XTSUM(asample, varname = pgexpue , unit = pid)</code></pre>
<pre><code>## $ores
## # A tibble: 1 x 5
##   ovr.mean ovr.sd ovr.min ovr.max  ovr.N
##      &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;
## 1    0.489   1.46       0    34.3 344352
## 
## $bres
## # A tibble: 1 x 5
##   between.sd between.min between.max Units t.bar
##        &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1       1.68           0        34.3 95777  3.60
## 
## $wres
## # A tibble: 1 x 3
##   within.sd within.min within.max
##       &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;
## 1     0.488      -11.5       14.1</code></pre>
<p>further Links on this topic: - <a href="https://stackoverflow.com/questions/14165752/between-within-standard-deviations-in-r" class="uri">https://stackoverflow.com/questions/14165752/between-within-standard-deviations-in-r</a> - <a href="https://www.r-bloggers.com/dplyr-do-some-tips-for-using-and-programming/" class="uri">https://www.r-bloggers.com/dplyr-do-some-tips-for-using-and-programming/</a> - psdata: <a href="https://github.com/rOpenGov/psData/issues/5" class="uri">https://github.com/rOpenGov/psData/issues/5</a> - dplyr xtsum: <a href="https://github.com/hadley/vctrs/issues/17" class="uri">https://github.com/hadley/vctrs/issues/17</a> - <a href="https://christophergandrud.github.io/RepResR-RStudio/" class="uri">https://christophergandrud.github.io/RepResR-RStudio/</a> - Get the column number in R given the column name - which( colnames(df)==“b” ) - <a href="https://stackoverflow.com/questions/16367436/compute-mean-and-standard-deviation-by-group-for-multiple-variables-in-a-data-fr" class="uri">https://stackoverflow.com/questions/16367436/compute-mean-and-standard-deviation-by-group-for-multiple-variables-in-a-data-fr</a></p>
</div>
</div>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
